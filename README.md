# OpenGemini - Gemini API ä»£ç†ä¸è½®è¯¢æ± 

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Gemini API ä»£ç†è§£å†³æ–¹æ¡ˆï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š
1.  ä¸€ä¸ªéƒ¨ç½²åœ¨ **Cloudflare Worker** ä¸Šçš„è½¬æ¢æœåŠ¡ï¼Œç”¨äºå°† Google Gemini API æ— ç¼è½¬æ¢ä¸ºæ ‡å‡†çš„ OpenAI API æ ¼å¼ã€‚
2.  ä¸€ä¸ªåœ¨æ‚¨è‡ªå·±æœåŠ¡å™¨ä¸Šè¿è¡Œçš„ **Node.js è½®è¯¢æ± **ï¼Œç”¨äºæ™ºèƒ½ç®¡ç†å’Œè½®æ¢å¤šä¸ª Gemini API å¯†é’¥åŠä¸Šæ¸¸è½¬æ¢æœåŠ¡ã€‚

## ğŸ“– é¡¹ç›®ç”±æ¥

ä¸€åˆ‡çš„èµ·å› æ˜¯ï¼Œä½œè€…æ‰‹å¤´æ°å¥½æœ‰ä¸€äº› Gemini API Keyï¼Œå´ç¼ºå°‘ä¸€å°åˆé€‚çš„å¢ƒå¤–æœåŠ¡å™¨æ¥æ­å»ºä¼ ç»Ÿçš„åå‘ä»£ç†å’Œè½®è¯¢æ± ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½œè€…çµæœºä¸€åŠ¨ï¼Œå†³å®šåˆ©ç”¨ Cloudflare Workers ~~ç™½å«–~~ å¼ºå¤§çš„è¾¹ç¼˜è®¡ç®—èƒ½åŠ›ï¼Œæ¥å®ç° Gemini API åˆ° OpenAI æ ¼å¼çš„è½¬æ¢ã€‚äºæ˜¯ï¼Œè¿™ä¸ªæ ¸å¿ƒçš„è½¬æ¢æœåŠ¡è„šæœ¬ä¾¿åœ¨ Gemini çš„å¸®åŠ©ä¸‹è¯ç”Ÿäº†ã€‚

éšåï¼Œä¸ºäº†ç®¡ç†æ‰‹å¤´çš„ä¼—å¤š Key å’Œä¸Šæ¸¸åœ°å€ï¼Œä½œè€…åˆåœ¨å›½å†…çš„äº‘æœåŠ¡å™¨ä¸Šï¼Œç”¨ Node.js æ­å»ºäº†ä¸€ä¸ªè½®è¯¢æ± ç¨‹åºã€‚

æœ€ç»ˆï¼Œè¿™ä¸¤éƒ¨åˆ†ç»„åˆèµ·æ¥ï¼Œå°±æ„æˆäº†è¿™ä¸ª~~ç®€é™‹ä½†èƒ½ç”¨~~åŠŸèƒ½å¼ºå¤§çš„ä»£ç†è§£å†³æ–¹æ¡ˆã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **æ ¼å¼è½¬æ¢**ï¼šå°† Gemini API å®Œç¾è½¬æ¢ä¸º OpenAI `v1/chat/completions` æ ¼å¼ï¼Œå…¼å®¹ç»å¤§å¤šæ•°å®¢æˆ·ç«¯ã€‚
- **å¯†é’¥è½®è¯¢**ï¼šæœ¬åœ°ä»£ç†æœåŠ¡ä¼šè‡ªåŠ¨è½®è¯¢ `key.txt` ä¸­çš„å¤šä¸ª Gemini API Keyï¼Œæœ‰æ•ˆè§£å†³å•ä¸ª Key çš„é€Ÿç‡é™åˆ¶é—®é¢˜ã€‚
- **ä¸Šæ¸¸è½®è¯¢**ï¼šæ”¯æŒé…ç½®å¤šä¸ª Cloudflare Worker åœ°å€ï¼Œå®ç°æ•…éšœè½¬ç§»å’Œè´Ÿè½½å‡è¡¡ã€‚
- **æ™ºèƒ½é‡è¯•**ï¼šå½“é‡åˆ° API Key è¶…é¢ (`429`) æˆ–ä¸Šæ¸¸æœåŠ¡æ•…éšœæ—¶ï¼Œä¼šè‡ªåŠ¨å°è¯•åˆ‡æ¢ï¼Œæé«˜æœåŠ¡ç¨³å®šæ€§ã€‚
- **æ˜“äºéƒ¨ç½²**ï¼šCloudflare Worker å’Œ Node.js æœåŠ¡å‡å¯å¿«é€Ÿéƒ¨ç½²å’Œé…ç½®ã€‚
- **å®Œå…¨å…è´¹**ï¼šCloudflare Workers åœ¨å…è´¹é¢åº¦å†…å®Œå…¨å¤Ÿç”¨ï¼Œè®©æ‚¨é›¶æˆæœ¬æ‹¥æœ‰ç¨³å®šçš„è½¬æ¢æœåŠ¡ã€‚

## ğŸ—ï¸ æ¶æ„

+-------------+      +-------------------------+      +---------------------------+      +-------------------+|             |      |                         |      |                           |      |                   ||  OpenAI å…¼å®¹ |----->|   Node.js è½®è¯¢æ± æœåŠ¡     |----->|   Cloudflare Worker æœåŠ¡   |----->|  Google Gemini API ||    å®¢æˆ·ç«¯    |      | (è¿è¡Œåœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Š)       |      | (è¿è¡Œåœ¨ Cloudflare å…¨çƒç½‘ç»œ) |      |                   ||             |      |                         |      |                           |      |                   |+-------------+      +-------------------------+      +---------------------------+      +-------------------+- è½®è¯¢ key.txt            - æå–çœŸå® Key- è½®è¯¢ upstreams.txt      - è½¬æ¢ API æ ¼å¼
## ğŸš€ éƒ¨ç½²æŒ‡å—

æ‚¨éœ€è¦å®Œæˆä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†çš„éƒ¨ç½²ã€‚

### ç¬¬ä¸€éƒ¨åˆ†ï¼šéƒ¨ç½² Cloudflare Worker è½¬æ¢æœåŠ¡

1.  **ç™»å½• Cloudflare**: è¿›å…¥æ‚¨çš„ Cloudflare æ§åˆ¶å°ã€‚
2.  **è¿›å…¥ Workers**: åœ¨å·¦ä¾§èœå•ä¸­ï¼Œé€‰æ‹© **Workers & Pages**ã€‚
3.  **åˆ›å»º Worker**: ç‚¹å‡» **Create Application** -> **Create Worker**ã€‚
4.  **å‘½åå¹¶éƒ¨ç½²**: ä¸ºæ‚¨çš„ Worker å‘½åï¼ˆä¾‹å¦‚ `gemini-openai-converter`ï¼‰ï¼Œç„¶åç‚¹å‡» **Deploy**ã€‚
5.  **ç¼–è¾‘ä»£ç **: ç‚¹å‡» **Edit code**ï¼Œå°† `cloudflare` æ–‡ä»¶å¤¹å†…çš„ `works.js` ä»£ç **å®Œå…¨å¤åˆ¶å¹¶ç²˜è´´**åˆ°ä»£ç ç¼–è¾‘å™¨ä¸­ã€‚
6.  **ä¿å­˜å¹¶éƒ¨ç½²**: ç‚¹å‡»å³ä¸Šè§’çš„ **Deploy** æŒ‰é’®ã€‚
7.  **è·å–åœ°å€**: éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨ä¼šå¾—åˆ°ä¸€ä¸ªç±»ä¼¼ `gemini-openai-converter.your-name.workers.dev` çš„åœ°å€ã€‚**è¯·å°†è¿™ä¸ªåœ°å€ï¼ˆå¹¶è®°å¾—åœ¨æœ«å°¾åŠ ä¸Š `/v1`ï¼‰**ï¼Œå¡«å…¥ä¸‹ä¸€æ­¥çš„ `upstreams.txt` æ–‡ä»¶ä¸­ã€‚

### ç¬¬äºŒéƒ¨åˆ†ï¼šéƒ¨ç½²æœ¬åœ° Node.js è½®è¯¢æ± 

1.  **ç¯å¢ƒå‡†å¤‡**:
    - å®‰è£… [Node.js](https://nodejs.org/) (æ¨è v18 æˆ–æ›´é«˜ç‰ˆæœ¬)
    - å®‰è£… [pnpm](https://pnpm.io/installation)

2.  **å…‹éš†ä¸å®‰è£…**:
    ```bash
    # å…‹éš†æœ¬é¡¹ç›®
    git clone [https://github.com/your-username/gemini-openai-cloudflare-proxy.git](https://github.com/your-username/gemini-openai-cloudflare-proxy.git)
    cd gemini-openai-cloudflare-proxy

    # ä½¿ç”¨ pnpm å®‰è£…ä¾èµ–
    pnpm i
    ```

3.  **é…ç½®**:
    æ‚¨éœ€è¦æ ¹æ®æä¾›çš„ç¤ºä¾‹æ–‡ä»¶ï¼Œåˆ›å»ºä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼š

    - **`key.txt`**:
        - å¤åˆ¶ `key.txt.example` å¹¶é‡å‘½åä¸º `key.txt`ã€‚
        - å°†æ‚¨è‡ªå·±çš„ Gemini API Key å¡«å…¥å…¶ä¸­ï¼Œ**æ¯ä¸ª Key ç‹¬å ä¸€è¡Œ**ã€‚

    - **`upstreams.txt`**:
        - å¤åˆ¶ `upstreams.txt.example` å¹¶é‡å‘½åä¸º `upstreams.txt`ã€‚
        - å°†æ‚¨åœ¨**ç¬¬ä¸€éƒ¨åˆ†**ä¸­éƒ¨ç½²å¥½çš„ Cloudflare Worker åœ°å€ï¼ˆ**å¿…é¡»åŒ…å« `/v1` åç¼€**ï¼‰å¡«å…¥å…¶ä¸­ï¼Œæ¯ä¸ªåœ°å€ç‹¬å ä¸€è¡Œã€‚

4.  **å¯åŠ¨æœåŠ¡**:
    ```bash
    node key.js
    ```
    æœåŠ¡å¯åŠ¨åï¼Œæ‚¨ä¼šåœ¨ç»ˆç«¯çœ‹åˆ°ç›‘å¬çš„åœ°å€å’Œä¸ºæ‚¨ç”Ÿæˆçš„**å›ºå®šè®¿é—®å¯†é’¥**ã€‚

## âš™ï¸ å®¢æˆ·ç«¯ä½¿ç”¨

åœ¨ä»»ä½•å…¼å®¹ OpenAI çš„å®¢æˆ·ç«¯ä¸­ï¼Œè¯·æŒ‰å¦‚ä¸‹é…ç½®ï¼š

- **API åœ°å€ / API Base**: `http://<è¿è¡Œè½®è¯¢æ± çš„æœåŠ¡å™¨IP>:7777/v1`
- **API å¯†é’¥ / API Key**: å¡«å…¥è½®è¯¢æ± æœåŠ¡å¯åŠ¨æ—¶ä¸ºæ‚¨ç”Ÿæˆçš„é‚£ä¸ª**å›ºå®šçš„ `sk-` æ ¼å¼å¯†é’¥**ã€‚

---

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼
